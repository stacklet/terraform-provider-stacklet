---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "stacklet_role_assignments Data Source - terraform-provider-stacklet"
subcategory: ""
description: |-
  Retrieve role assignments for a specific target. This data source allows you to query which principals (users or SSO groups) have been granted roles on a particular target (system, account group, policy collection, or repository).
---

# stacklet_role_assignments (Data Source)

Retrieve role assignments for a specific target. This data source allows you to query which principals (users or SSO groups) have been granted roles on a particular target (system, account group, policy collection, or repository).

## Example Usage

```terraform
# Query all system-level role assignments
data "stacklet_role_assignments" "system_access" {
  target {
    type = "system"
  }
}

# Query role assignments for a specific account group
data "stacklet_role_assignments" "production_acl" {
  target {
    type = "account-group"
    uuid = stacklet_account_group.production.uuid
  }
}

# Query role assignments for a policy collection
data "stacklet_role_assignments" "security_policies_access" {
  target {
    type = "policy-collection"
    uuid = stacklet_policy_collection.security.uuid
  }
}

# Query role assignments for a repository
data "stacklet_role_assignments" "repo_access" {
  target {
    type = "repository"
    uuid = stacklet_repository.custom_policies.uuid
  }
}

# Output all system administrators
output "system_admins" {
  description = "All principals with system-level access"
  value = [
    for assignment in data.stacklet_role_assignments.system_access.assignments :
    {
      role      = assignment.role_name
      principal = assignment.principal
    }
  ]
}

# Output production account group access control list
output "production_access_summary" {
  description = "Summary of who has access to the production account group"
  value = {
    total_assignments = length(data.stacklet_role_assignments.production_acl.assignments)
    assignments       = data.stacklet_role_assignments.production_acl.assignments
  }
}

# Check if specific user has access
locals {
  user_id_to_check = 123

  user_has_production_access = anytrue([
    for assignment in data.stacklet_role_assignments.production_acl.assignments :
    assignment.principal.type == "user" && assignment.principal.id == local.user_id_to_check
  ])
}

output "user_has_access" {
  description = "Whether user 123 has any role on the production account group"
  value       = local.user_has_production_access
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `target` (Attributes) The target entity to query role assignments for. (see [below for nested schema](#nestedatt--target))

### Read-Only

- `assignments` (Attributes List) The list of role assignments for the target. (see [below for nested schema](#nestedatt--assignments))

<a id="nestedatt--target"></a>
### Nested Schema for `target`

Required:

- `type` (String) The type of target. Valid values: 'system', 'account-group', 'policy-collection', 'repository'.

Optional:

- `uuid` (String) The UUID of the target. Required for all target types except 'system'.


<a id="nestedatt--assignments"></a>
### Nested Schema for `assignments`

Read-Only:

- `id` (String) The unique identifier of the role assignment.
- `principal` (Attributes) The principal (user or SSO group) that has been granted the role. (see [below for nested schema](#nestedatt--assignments--principal))
- `role_name` (String) The name of the role assigned.
- `target` (Attributes) The target entity that the role is assigned to. (see [below for nested schema](#nestedatt--assignments--target))

<a id="nestedatt--assignments--principal"></a>
### Nested Schema for `assignments.principal`

Read-Only:

- `id` (Number) The numeric ID of the principal.
- `type` (String) The type of principal. Either 'user' or 'sso-group'.


<a id="nestedatt--assignments--target"></a>
### Nested Schema for `assignments.target`

Read-Only:

- `type` (String) The type of target.
- `uuid` (String) The UUID of the target (null for system targets).
