---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "stacklet_role_assignments Data Source - terraform-provider-stacklet"
subcategory: ""
description: |-
  Retrieve role assignments for a specific target. This data source allows you to query which principals (users or SSO groups) have been granted roles on a particular target (system, account group, policy collection, or repository).
---

# stacklet_role_assignments (Data Source)

Retrieve role assignments for a specific target. This data source allows you to query which principals (users or SSO groups) have been granted roles on a particular target (system, account group, policy collection, or repository).

## Example Usage

```terraform
# Query all system-level role assignments
data "stacklet_role_assignments" "system_access" {
  target = "system:all"
}

# Query role assignments for a specific account group
data "stacklet_role_assignments" "production_acl" {
  target = "account-group:00000000-0000-0000-0000-000000000001"
}

# Query role assignments for a policy collection
data "stacklet_role_assignments" "security_policies_access" {
  target = "policy-collection:00000000-0000-0000-0000-000000000002"
}

# Query role assignments for a repository
data "stacklet_role_assignments" "repo_access" {
  target = "repository:00000000-0000-0000-0000-000000000003"
}

# Output all system administrators
output "system_admins" {
  description = "All principals with system-level access"
  value = [
    for assignment in data.stacklet_role_assignments.system_access.assignments :
    {
      role      = assignment.role_name
      principal = assignment.principal
    }
  ]
}

# Output production account group access control list
output "production_access_summary" {
  description = "Summary of who has access to the production account group"
  value = {
    total_assignments = length(data.stacklet_role_assignments.production_acl.assignments)
    assignments       = data.stacklet_role_assignments.production_acl.assignments
  }
}

# Check if specific user has access
locals {
  user_id_to_check = 123

  user_has_production_access = anytrue([
    for assignment in data.stacklet_role_assignments.production_acl.assignments :
    assignment.principal.type == "user" && assignment.principal.id == local.user_id_to_check
  ])
}

output "user_has_access" {
  description = "Whether user 123 has any role on the production account group"
  value       = local.user_has_production_access
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `target` (String) The target identifier to query role assignments for (e.g., 'system:all', 'account-group:uuid', 'policy-collection:uuid', 'repository:uuid'). Use the 'target' attribute from resource outputs.

### Read-Only

- `assignments` (Attributes List) The list of role assignments for the target. (see [below for nested schema](#nestedatt--assignments))

<a id="nestedatt--assignments"></a>
### Nested Schema for `assignments`

Read-Only:

- `id` (String) The unique identifier of the role assignment.
- `principal` (String) The principal identifier (e.g., 'user:123', 'sso-group:456').
- `role_name` (String) The name of the role assigned.
- `target` (String) The target identifier (e.g., 'account-group:uuid').
